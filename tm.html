<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>A Simple Turing Machine Editor</title>
    <link href="styles/tm.css" rel="stylesheet" type="text/css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
    <script src="main.js"></script>
    <script src="behaviors.js"></script>
    <script src="util.js"></script>
    <script src="queue.js"></script>
    <script src="psets.js"></script>

    <script src="brush/brush.js"></script>

    <script src="graph/graph.js"></script>
    <script src="graph/delete.js"></script>

    <script src="edges/edges.js"></script>
    <script src="edges/initial.js"></script>
    <script src="edges/selection.js"></script>
    <script src="edges/dragging.js"></script>
    <script src="edges/edit.js"></script>

    <script src="nodes/nodes.js"></script>
    <script src="nodes/edit.js"></script>
    <script src="nodes/movement.js"></script>
    <script src="nodes/selection.js"></script>
    <script src="nodes/doubleclicking.js"></script>
    <script src="nodes/snaptogrid.js"></script>
    <script src="nodes/forcedirected.js"></script>

    <script src="menu/top.js"></script>
    <script src="menu/modal.js"></script>
    <script src="menu/table.js"></script>
    <script src="menu/tabletop.js"></script>
    <script src="menu/test.js"></script>
    <script src="menu/error.js"></script>

    <script src="simulation/dfa.js"></script>
    <script src="simulation/nfa.js"></script>
    <script src="simulation/sim.js"></script>
    <script src="simulation/bulk.js"></script>
    <script src="simulation/tape.js"></script>

    <script src="server/server.js"></script>
    <script src="server/mock.js"></script>

  </head>
  <body onload="run()" onresize="gGraph.resize()">
    <div class="menu">
      <div class="left">
        <button type="button" onclick="gTopMenu.homepage ()">Return to Creation Page</button>
        <button type="button" onclick="gTopMenu.save ()">Save</button>
        <button type="button" onclick="gTopMenu.submit ()">Submit</button>
      </div>
      <div class="center">
        <button class="swapButton" type="button" onclick="gTableTopMenu.swap ()">Switch to Table View</button>
      </div>
      <div class="right">
        <button type="button" onclick="gTopMenu.loadFromServer ()">Load</button>
        <button class="nontable" type="button" onclick="gTopMenu.snapToGrid ()">Snap to Grid</button>
        <button class="nontable" type="button" onclick="gTopMenu.forcedDirectedLayout ()">Force Directed Layout</button>
      </div>
      <!--
        Not needed until Turing Machines
        <button type="button" class="rejectButton" onclick="gTopMenu.setState(false, true)">&#x2717; Rejecting</button>
        <button type="button" class="neitherButton" onclick="gTopMenu.setState(false, false)">&#x25cb; Neither</button>
      -->
    </div>
    <div class="menu">
      <div class="left">
        <button type="button" class="button-primary" onclick="gTopMenu.addNode()">+ Add New State</button>
      </div>
      <div class="center">
        <div id="selectedText" class="nontable">Selected states: </div>
      </div>

      <div class="right">
        <button class="nontable" type="button" onclick="gTopMenu.deleteSelected ()">Delete Selected</button>
        <button class="nontable" type="button" onclick="gTopMenu.setInitial ()">&#x2192; Set as Start</button>
        <button type="button" class="acceptButton nontable" onclick="gTopMenu.setState(true, false)">&#x2713; Accepting</button>
        <button type="button" class="neitherButton nontable" onclick="gTopMenu.setState(false, false)">&#x2717; Rejecting</button>
      </div>
    </div>
    <div class="gui">
        <div class="errors">
        </div>
      <svg height="100%" width="100%">
        <g class="brush" />
        <g class="nodesLower" />
        <g class="edgesLower" />
        <g class="edges" />
        <g class="miscEdges" />
        <g class="nodes" />
        <g class="tape" />
      </svg>
      <table class="tableEditor">
      </table>
    </div>
    <div class="alphabet-bar">
      Current Alphabet: <span class="current-alphabet"></span>,
      Current Mode: <span class="current-mode">DFA</span>
    </div>
    <div class="tape-bar">
      <button onclick="gTestMenu.runTests ()">
        Run Batch Test
      </button >
      <button onclick="gTestMenu.end ()" class="nfa-hide nontable running">
        Stop
      </button>
      <button onclick="gTestMenu.step ()" class="nfa-hide nontable running stepButton">
        Step
      </button>
      <button onclick="gTestMenu.run ()" class="nfa-hide nontable runButton">
        Start
      </button>
      <div class="tape-field nfa-hide nontableblock">
        <input type="text" class="tape-char-input" name="tapeChar[]" onblur="gTestMenu.disallowInput ()"/>
      </div>
    </div>
    <div class="modal overlay">

      <div class="load popup">
        <div class="modal-header">
          Load Automaton
        </div>
        <div class="modal-content">
          <ul class="loadNames">
            <!-- <li class="selected">First</li> -->
          </ul>
        </div>
        <div class="modal-buttons">
          <button type="button" onclick="gModalMenu.cancel ('load')">Cancel</button>
          <button type="button" class="button-primary loadButton" onclick="gModalMenu.submit ('load')">Load</button>
        </div>
      </div>

      <div class="save popup">
        <div class="modal-header">
          Save As
        </div>
        <input type="text" class="saveText" maxlength="30"></input>
        <div class="modal-buttons">
          <button type="button" onclick="gModalMenu.cancel ('save')">Cancel</button>
          <button type="button" class="button-primary saveButton" onclick="gModalMenu.submit ('save')">Save</button>
        </div>
      </div>

      <div class="confirm popup">
        <div class="modal-header">
          Confirm
        </div>
        <p class="modal-description">
          An automata with that name already exists. Are you sure you want to overwrite it?
        </p>
        <input type="text" class="saveText" maxlength="30"></input>
        <div class="modal-buttons">
          <button type="button" onclick="gModalMenu.cancel ('save')">Cancel</button>
          <button type="button" class="button-primary saveButton" onclick="gModalMenu.submit ('save')">Yes, I'm sure.</button>
        </div>
      </div>

      <div class="submit popup">
        <div class="modal-header">
          Submit
        </div>
        <div class="modal-content">
        <table width="100%">
          <tr>
            <td class="popupLeft">Problem Set</td>
            <td class="popupRight"><select  class="pset" onchange="gModalMenu.changeNumbers ()"></select></td>
          </tr>
          <tr>
            <td class="popupLeft">Problem</td>
            <td class="popupRight"><select class="problem"></select></td>
          </tr>
          <tr>
            <td class="popupLeft">Team Members</td>
            <td class="popupRight"><input type="text" class="gridInput teamText"></td>
          </tr>
        </table>
      </div>
        <div class="modal-buttons">
          <button type="button" onclick="gModalMenu.cancel ('submit')">Cancel</button>
          <button type="button" class="button-primary submitButton" onclick="gModalMenu.submit ('submit')">Submit</button>
        </div>
      </div>

      <div class="edgeEntry popup">
        <div class="modal-header">
          Edit Edge
        </div>
        <div class="modal-content">
          <table width="100%">
            <tr>
              <td class="popupLeft">Characters</td>
              <td class="popupRight"><input type="text" class="edgeChars" size="20"></td>
            </tr>
            <tr>
              <td>
              </td>
              <td class="popupRight char-options">
                <button type="button" onclick="gModalMenu.addAllEdgeChars ()">Add All</button>
                <button type="button" onclick="gModalMenu.invertEdgeChars ()">Invert</button>
              </td>
            </tr>
            <tr class="dfa-hide">
              <td class="popupLeft">Include ∆ê</td>
              <td class="popupRight"><input type="checkbox" class="epsilon" size="1"></td>
            </tr>
          </table>
        </div>
        <div class="modal-buttons">
          <button type="button" onclick="gModalMenu.cancel ('edgeEntry')">Cancel</button>
          <button type="button" onclick="gModalMenu.deleteEdge ()">Delete Edge</button>
          <button type="button" onclick="gModalMenu.submit ('edgeEntry')">Update</button>
        </div>
      </div>

      <div class="testing popup">
        <div class="modal-header">
          <span>Run Tests</span>
        </div>
        <div class="modal-content bulkContent">
          <p class="modal-description">
            Enter one test input per line. Enter one test input per line. Select "A" or "R" for Accept and Reject to give an expected result.
          </p>
          <table class="layout">
            <tr>
              <td class="popupLeft" width="50%">
                <table class="testingHeader">
                  <tr>
                    <td>Input</td>
                    <td>A</td>
                    <td>R</td>
                  </tr>
                </table>
              </td>
              <td class="popupRight" style="vertical-align: top;" width="50%">
                <table class="testingHeader" width="100%" height="20px">
                  <tr>
                    <td>Input</td>
                    <td>Result</td>
                    <td>Matches</td>
                  </tr>
                </table>
                <table class="testingResults" width="100%">
                </table>
              </td>
            </tr>
          </table>
        </div>
        <div class="modal-buttons">
          <button type="button" onclick="gModalMenu.buildRow (true)">Add Another Test</button>
          <button type="button" onclick="gModalMenu.cancel ('testing')">Cancel</button>
          <button type="button" onclick="gModalMenu.submit ('testing')">Run</button>
        </div>
      </div>

      <div class="nodeEntry popup">
        <div class="modal-header">
          <span>Edit Node</span>
        </div>
        <div class="modal-content">
          <p class="modal-description">
            Enter a new name for this node. (5 character maximum)
          </p>
          <table width="100%">
            <tr>
              <td class="popupLeft">Name</td>
              <td class="popupRight"><input type="text" class="nodeName" maxlength="5"></td>
            </tr>
          </table>
        </div>
        <div class="modal-buttons">
          <button type="button" onclick="gModalMenu.cancel ('nodeEntry')">Cancel</button>
          <button type="button" class="button-primary" onclick="gModalMenu.submit ('nodeEntry')">Update</button>
        </div>
      <!-- <div class="bg" style="display:none;">
      </div>-->
    </div>
  </body>
</html>

<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>A Simple Turing Machine Editor</title>
    <link href="styles/tm.css" rel="stylesheet" type="text/css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.js"></script>
    <script src="main.js"></script>
    <script src="behaviors.js"></script>
    <script src="util.js"></script>
    <script src="queue.js"></script>
    <script src="brush/brush.js"></script>

    <script src="graph/graph.js"></script>
    <script src="graph/delete.js"></script>

    <script src="edges/edges.js"></script>
    <script src="edges/initial.js"></script>
    <script src="edges/selection.js"></script>
    <script src="edges/dragging.js"></script>
    <script src="edges/edit.js"></script>

    <script src="nodes/nodes.js"></script>
    <script src="nodes/movement.js"></script>
    <script src="nodes/selection.js"></script>
    <script src="nodes/doubleclicking.js"></script>
    <script src="nodes/snaptogrid.js"></script>
    <script src="nodes/forcedirected.js"></script>

    <script src="menu/top.js"></script>
    <script src="menu/modal.js"></script>
    <script src="menu/table.js"></script>
    <script src="menu/tabletop.js"></script>
    <script src="menu/test.js"></script>

    <script src="simulation/dfa.js"></script>
    <script src="simulation/nfa.js"></script>
    <script src="simulation/sim.js"></script>
    <script src="simulation/bulk.js"></script>
    <script src="simulation/tape.js"></script>

  </head>
  <body onload="run()" onresize="gGraph.resize()">
    <div class="menu">
      <div class="left">
        <button type="button" onclick="gTopMenu.save (this)">Save</button>
      </div>
      <div class="center">
        <button class="swapButton" type="button" onclick="gTableTopMenu.swap ()">Switch to Table View</button>
      </div>
      <div class="right">
        <button type="button" onclick="gTopMenu.loadFromServer ()">Load</button>
        <button class="nontable" type="button" onclick="gTopMenu.snapToGrid ()">Snap to Grid</button>
      </div>
      <!--
        Not needed until Turing Machines
        <button type="button" class="rejectButton" onclick="gTopMenu.setState(false, true)">&#x2717; Rejecting</button>
        <button type="button" class="neitherButton" onclick="gTopMenu.setState(false, false)">&#x25cb; Neither</button>
      -->
      <!--<input class="fileInput" id="fileInput" type="file" onchange="gTopMenu.load ();">-->
    </div>
    <div class="menu">
      <div class="left">
        <button type="button" class="button-primary" onclick="gTopMenu.addNode()">+ Add New State</button>
      </div>
      <div class="center">
        <div class="nontable" id="selectedText">Selected states:</div>
      </div>
      <div class="right">
        <button class="nontable" type="button" onclick="gTopMenu.deleteSelected ()">Delete Selected</button>
        <button class="nontable" type="button" onclick="gTopMenu.setInitial ()">&#x2192; Set as Start</button>
        <button type="button" class="acceptButton nontable" onclick="gTopMenu.setState(true, false)">&#x2713; Accepting</button>
        <button type="button" class="neitherButton nontable" onclick="gTopMenu.setState(false, false)">&#x2717; Rejecting</button>
      </div>
    </div>
    <div class="gui">
      <svg height="100%" width="100%">
        <g class="brush" />
        <g class="nodesLower" />
        <g class="edgesLower" />
        <g class="edges" />
        <g class="miscEdges" />
        <g class="nodes" />
        <g class="tape" />
      </svg>
      <table class="tableEditor">
      </table>
    </div>
    <div class="tape-bar">
      <button onclick="gTestMenu.runTests ()">
        Run Batch Test
      </button >
      <button onclick="gTestMenu.end ()">
        End
      </button>
      <button onclick="gTestMenu.step ()">
        Step
      </button>
      <button onclick="gTestMenu.run ()">
        Run
      </button>
      <div class="tape-field">
        <!--
          <input type="text" class="tape-char current-tape-char" name="tapeChar[]" maxlength="1" />
        -->
        <input type="text" class="tape-char-input" name="tapeChar[]" onblur="gTestMenu.disallowInput ()"/>
      </div>
    </div>
    <div class="modal overlay" style="display:block">

      <div class="load popup">
        <div class="modal-header">
          Load Automaton
        </div>
        <div class="modal-content">
          <ul>
            <li>First</li>
            <li>Second</li>
            <li>Third</li>
            <li>Fourth</li>
            <li class="selected">First</li>
            <li>Second</li>
            <li>Third</li>
            <li>Fourth</li>
          </ul>
        </div>
        <div class="modal-buttons">
          <button type="button">Cancel</button>
          <button type="button" class="button-primary">Load</button>
        </div>
      </div>

      <div class="save popup" style="display: none">
        <div class="modal-header">
          Save as
        </div>
        <input type="text">
        <div class="modal-buttons">
          <button type="button">Cancel</button>
          <button type="button" class="button-primary">Save</button>
        </div>
      </div>

      <div class="edgeEntry popup">
        <div width="100%" height="150px" class="popupTitle">
          <span>Edit Edge</span>
        </div>
        <br />
        <table width="100%">
          <tr>
            <td class="popupLeft">Characters</td>
            <td class="popupRight"><input type="text" class="edgeChars" size="20"></td>
          </tr>
          <tr>
            <td>
            </td>
            <td class="popupRight">
              <button type="button" onclick="gModalMenu.addAllEdgeChars ()">Add All</button>
              <button type="button" onclick="gModalMenu.invertEdgeChars ()">Invert</button>
            </td>
          </tr>
          <tr>
            <td class="popupLeft">Include ∆ê</td>
            <td class="popupRight"><input type="checkbox" class="epsilon" size="1"></td>
          </tr>
        </table>
        <div class="popupButtons">
          <button type="button" onclick="gModalMenu.close ('edgeEntry')">Cancel</button>
          <button type="button" onclick="gModalMenu.submit ('edgeEntry')">Update</button>
        </div>
      </div>

      <div class="testing popup">
        <div width="100%" height="150px" class="popupTitle">
          <span>Run Tests</span>
        </div>
        <br />
        <div width="400px">
          Enter one test input per line. Append " A" or "R" for Accept and Reject to the end of each line to give an expected result.
        </div>
        <table width="100%" height="200px">
          <tr>
            <td class="popupLeft" width="30%">
              <textarea cols="25" width="100%" class="testingText"></textarea>
            </td>
            <td class="popupRight" style="vertical-align: top;" width="70%">
              <table class="testingHeader" width="100%" height="20px">
                <tr>
                  <td width="60%" style="text-align: center; padding: 0;">Input</td>
                  <td width="20%" style="text-align: center; padding: 0;">Result</td>
                  <td width="20%" style="text-align: center; padding: 0;">Matches</td>
                </tr>
              </table>
              <table class="testingResults" width="100%">
              </table>
            </td>
          </tr>
        </table>
        <div class="popupButtons">
          <button type="button" onclick="gModalMenu.close ('testing')">Close</button>
          <button type="button" onclick="gModalMenu.submit ('testing')">Run</button>
        </div>
      </div>

      <div class="bg" style="display:none;">
      </div>
    </div>
  </body>
</html>
